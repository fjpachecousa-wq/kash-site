<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Validador de Assinatura – KASH</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="wrap">
    <header><h1>Validador de Assinatura Eletrônica</h1></header>
    <section class="card">
      <p class="muted">Versão demonstrativa (client-side). Em produção, esta página deve consultar sua API para validar o <strong>Signature ID</strong> e o <strong>hash</strong> (HMAC no servidor) e exibir: autenticidade, datas, IP e status (válido/revogado).</p>
      <form id="valForm" class="row">
        <input id="sigInput" placeholder="Informe o Signature ID (ex.: KCS-SIG-20250909-1234)" style="flex:1" />
        <button class="btn" type="submit">Validar</button>
      </form>
      <div id="valOut" style="margin-top:12px"></div>
    </section>
  </div>
<script>
document.getElementById('valForm').addEventListener('submit', (e)=>{
  e.preventDefault();
  const sig = document.getElementById('sigInput').value.trim() || new URLSearchParams(location.search).get('sig');
  if (!sig){ document.getElementById('valOut').innerHTML = '<span class="muted">Informe um Signature ID.</span>'; return; }
  const ok = /^KCS-SIG-\\d{8}-\\d{4}$/.test(sig);
  document.getElementById('valOut').innerHTML = ok
    ? '<div class="print-area"><h3>Resultado (DEMO)</h3><p><strong>Assinatura localizada:</strong> '+sig+'</p><p>Para validação real, conecte /validate da sua API e exiba status, datas e hash.</p></div>'
    : '<div class="print-area"><p><strong>Signature ID inválido</strong></p></div>';
});
// Pré-preenche a partir de ?sig=
const p = new URLSearchParams(location.search).get('sig'); if (p) document.getElementById('sigInput').value = p;
</script>
</body>
</html>

